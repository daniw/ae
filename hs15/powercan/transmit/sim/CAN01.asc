Version 4
SHEET 1 1976 680
WIRE -528 -336 -704 -336
WIRE -256 -336 -448 -336
WIRE 16 -336 -256 -336
WIRE 96 -336 16 -336
WIRE 240 -336 176 -336
WIRE 368 -336 320 -336
WIRE 656 -336 368 -336
WIRE 704 -336 656 -336
WIRE 848 -336 784 -336
WIRE 864 -336 848 -336
WIRE 896 -336 864 -336
WIRE 960 -336 896 -336
WIRE 1104 -336 1040 -336
WIRE 1168 -336 1104 -336
WIRE 1200 -336 1168 -336
WIRE 1360 -336 1280 -336
WIRE 848 -304 848 -336
WIRE 896 -304 896 -336
WIRE 1168 -304 1168 -336
WIRE 1360 -304 1360 -336
WIRE 1488 -288 1408 -288
WIRE 1424 -240 1408 -240
WIRE -528 -208 -576 -208
WIRE 0 -208 -448 -208
WIRE 16 -208 0 -208
WIRE 96 -208 16 -208
WIRE 240 -208 176 -208
WIRE 448 -208 320 -208
WIRE 592 -208 448 -208
WIRE 704 -208 592 -208
WIRE 848 -208 848 -224
WIRE 848 -208 784 -208
WIRE 896 -208 896 -240
WIRE 896 -208 848 -208
WIRE 1056 -208 896 -208
WIRE 1168 -208 1168 -224
WIRE 1168 -208 1056 -208
WIRE 1360 -208 1360 -224
WIRE 1360 -208 1168 -208
WIRE 1424 -208 1424 -240
WIRE 1488 -208 1424 -208
WIRE 1488 -192 1488 -208
WIRE -576 -144 -576 -208
WIRE -256 -144 -256 -336
WIRE 0 -144 0 -208
WIRE 448 -144 448 -208
WIRE 592 -144 592 -208
WIRE 656 -144 656 -336
WIRE 656 -48 656 -80
WIRE 752 -48 656 -48
WIRE 880 -48 752 -48
WIRE 1056 -48 880 -48
WIRE 1216 -48 1056 -48
WIRE 448 -32 448 -64
WIRE 1216 -32 1216 -48
WIRE 976 48 928 48
WIRE 448 64 448 48
WIRE 880 64 880 -48
WIRE 1056 64 1056 -48
WIRE -256 80 -256 -80
WIRE 0 80 0 -80
WIRE 1216 80 1216 48
WIRE 1360 80 1216 80
WIRE 1216 96 1216 80
WIRE 368 160 368 -336
WIRE 448 160 448 128
WIRE 448 160 368 160
WIRE -704 176 -704 -336
WIRE -608 176 -608 80
WIRE -368 176 -368 80
WIRE -256 176 -256 80
WIRE 0 176 0 80
WIRE 592 208 592 -80
WIRE 752 208 592 208
WIRE 880 208 880 112
WIRE 880 208 752 208
WIRE 928 208 928 128
WIRE 928 208 880 208
WIRE 976 208 976 48
WIRE 976 208 928 208
WIRE 1056 208 1056 128
WIRE 1056 208 976 208
WIRE 1216 208 1216 176
WIRE 1216 208 1056 208
FLAG -608 256 0
FLAG -368 256 0
FLAG -256 256 0
FLAG -608 80 data
FLAG -368 80 offset
FLAG -256 80 CAN_H
FLAG 0 256 0
FLAG 0 80 CAN_L
FLAG -704 256 0
FLAG -576 -144 0
FLAG 16 -208 BUS_L
FLAG 16 -336 BUS_H
FLAG 1056 -208 LOAD_L
FLAG 1104 -336 LOAD_H
FLAG 864 -336 LOAD_F1
FLAG 1360 80 offset
FLAG 752 -48 CAN_NODE_H
FLAG 752 208 CAN_NODE_L
FLAG 1488 -192 0
SYMBOL voltage -608 160 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName data
SYMATTR Value PWL file=data.txt
SYMBOL bv -256 160 R0
SYMATTR InstName CAN_H
SYMATTR Value V=V(offset)+V(data)
SYMBOL voltage -368 160 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName offset
SYMATTR Value 2.5
SYMBOL bv 0 160 R0
SYMATTR InstName CAN_L
SYMATTR Value V=V(offset)-V(data)
SYMBOL voltage -704 160 R0
SYMATTR InstName DC
SYMATTR Value 24
SYMBOL ind -544 -320 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 1m
SYMATTR SpiceLine Rser=10m Rpar=1g
SYMBOL ind -544 -192 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L2
SYMATTR Value 1m
SYMATTR SpiceLine Rser=10m Rpar=1g
SYMBOL cap -272 -144 R0
SYMATTR InstName C1
SYMATTR Value 100n
SYMATTR SpiceLine Rser=0.1
SYMBOL cap -16 -144 R0
SYMATTR InstName C2
SYMATTR Value 100n
SYMATTR SpiceLine Rser=0.1
SYMBOL res 1152 -320 R0
SYMATTR InstName R1
SYMATTR Value 10
SYMBOL ind 688 -320 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L3
SYMATTR Value 1m
SYMATTR SpiceLine Rser=10m Rpar=1g
SYMBOL ind 688 -192 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L4
SYMATTR Value 1m
SYMATTR SpiceLine Rser=10m Rpar=1g
SYMBOL cap 880 -304 R0
SYMATTR InstName C3
SYMATTR Value 1m
SYMATTR SpiceLine Rser=10m
SYMBOL ind 944 -320 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L5
SYMATTR Value 1m
SYMATTR SpiceLine Rser=10m Rpar=1g
SYMBOL res 832 -320 R0
SYMATTR InstName R2
SYMATTR Value 1k
SYMBOL cap 576 -144 R0
SYMATTR InstName C4
SYMATTR Value 100n
SYMATTR SpiceLine Rser=0.1
SYMBOL cap 640 -144 R0
SYMATTR InstName C5
SYMATTR Value 100n
SYMATTR SpiceLine Rser=0.1
SYMBOL res 1200 -48 R0
SYMATTR InstName R3
SYMATTR Value 1k
SYMBOL res 1200 80 R0
SYMATTR InstName R4
SYMATTR Value 1k
SYMBOL sw 928 32 R0
SYMATTR InstName S1
SYMATTR Value MYSW
SYMBOL res 432 -160 R0
SYMATTR InstName R5
SYMATTR Value 50
SYMBOL ind 432 -48 R0
SYMATTR InstName L6
SYMATTR Value 100µ
SYMBOL cap 432 64 R0
SYMATTR InstName C6
SYMATTR Value 510.9n
SYMBOL res 80 -320 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R6
SYMATTR Value 100m
SYMBOL res 80 -192 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R7
SYMATTR Value 100m
SYMBOL ind 224 -320 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L7
SYMATTR Value 2µ
SYMBOL ind 224 -192 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L8
SYMATTR Value 2µ
SYMBOL schottky 1072 128 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMATTR Value BAT54
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL sw 1360 -208 R180
SYMATTR InstName S2
SYMATTR Value MYSW
SYMBOL res 1184 -320 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R8
SYMATTR Value 24
SYMBOL voltage 1488 -304 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value PULSE(0 5 0.8m 1n 1n 1 2)
TEXT 344 272 Left 2 !.tran 0 10000u 0 10n
TEXT 664 272 Left 2 !.model MYSW SW(Ron=10 Roff=1meg Vt=0 Vh=0.5)
